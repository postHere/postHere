/* ===== Notification page styles ===== */

:root {
    --footer-height: 120px; /* JS가 실측으로 덮어씀 */

    /* [유지] 카드용 점/패딩 계산 값 */
    --dot-size: 8px;
    --dot-gap-left: 6px;
    --dot-gap-right: 12px;
    --card-hpad: calc(var(--dot-size) + var(--dot-gap-left) + var(--dot-gap-right));

    /* ===== 상태바/헤더 레이아웃 변수 ===== */
    /* [중요 변경] safe-area를 '항상' 비워둔다.
       - 지원 환경: env(safe-area-inset-top)가 실제 노치/상태바 높이 반환
       - 미지원/0인 환경(안드/웹뷰 등): 최소 24px을 확보하여 겹침 방지
       - 필요 시 --safe-top-min 값을 20~28px에서 조정 가능 */
    --safe-top-min: 24px;
    --safe-top: env(safe-area-inset-top, var(--safe-top-min));

    --header-height: 52.8px; /* 시각적 헤더 고정 높이 */
    --top-stack: calc(var(--safe-top) + var(--header-height)); /* safe + header 합 */
}

/* 페이지 배경을 흰색으로(양옆 띠 제거) */
#page-notifications {
    display: flex;
    justify-content: center;
    background-color: #ffffff;
    height: 100%;
    margin: 0;
    padding: 0;
    width: 100%;
    min-height: 100%;
    overflow-x: hidden;
    overflow-y: hidden;
}

/* [중요] index.css의 #app-container padding:16px 제거(이 페이지 한정) */
#page-notifications #app-container {
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: stretch;

    height: 100%;
    width: 100%;
    max-width: 400px;
    background: #fff;

    padding: 0 !important; /* ★ 상단 16px 제거 (겹침 원인 차단) */
    box-sizing: border-box;
}

/* ===== safe-area 전용 스페이서(항상 공간을 먼저 차지) =====
   - 실제 DOM 영역을 점유하므로 어떤 환경에서도 컨텐츠가 상태바와 겹치지 않음
   - sticky로 상단에 달라붙지만 높이만큼 레이아웃 공간을 미리 확보 */
.safe-top-spacer {
    height: var(--safe-top);
    background: #fff;
    position: sticky;
    top: 0;
    z-index: 1000;
    pointer-events: none;
}

/* ===== 시각적 헤더(52.8px 고정) ===== */
.noti-topbar {
    position: sticky;
    top: 0; /* safe-top-spacer 바로 아래(스페이서가 이미 공간을 차지함) */
    z-index: 1001;
    width: 100%;
    background: #fff;
    border-bottom: 1px solid #e9e9e9;
    box-sizing: border-box;
}

.noti-topbar-inner {
    height: var(--header-height);
    display: flex;
    align-items: center; /* 세로 중앙 */
    justify-content: center; /* 가로 중앙 */
    padding: 0 16px;
    position: relative;
}

.noti-title {
    margin: 0;
    font-size: 18px;
    font-weight: 700;
    line-height: 1;
    text-align: center;
    width: 100%;
    pointer-events: none;
}

/* (옵션) 뒤로가기 버튼 */
.noti-back-btn {
    position: absolute;
    left: 8px;
    top: 50%;
    transform: translateY(-50%);
    width: 36px;
    height: 36px;
    border: 0;
    background: transparent;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    color: #333;
}

/* ===== 리스트 ===== */
#page-notifications .list {
    width: 100%;
    max-width: 360px;
    margin: 0 auto;

    /* 상태바+헤더+푸터 제외 높이만큼 스크롤 영역 확보 */
    height: calc(100svh - var(--top-stack) - var(--footer-height));
    min-height: 0;

    padding: 0;
    box-sizing: border-box;
    background: #fff;

    display: flex;
    flex-direction: column;
    align-items: stretch;

    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
    will-change: transform;
    padding-bottom: calc(var(--footer-height) + 16px);
}

#page-notifications .list .empty {
    padding: 24px 12px;
    color: #999;
    text-align: center;
}

/* ===== 카드 ===== */
.noti-card {
    position: relative;
    display: flex;
    align-items: flex-start;
    gap: 8px;
    padding: 10px var(--card-hpad);
    border-bottom: 1px solid #eee;
    text-decoration: none;
    color: inherit;
}

/* 링크 파란색/밑줄 제거(모든 상태) */
a.noti-card,
a.noti-card:link,
a.noti-card:visited,
a.noti-card:hover,
a.noti-card:active {
    color: inherit;
    text-decoration: none;
}

/* 빨간 점 */
.noti-card::before {
    content: "";
    position: absolute;
    left: var(--dot-gap-left);
    top: 24px;
    width: var(--dot-size);
    height: var(--dot-size);
    border-radius: 9999px;
    background: transparent;
}

.noti-card[data-unread="true"]::before {
    background: #e74c3c;
}

/* 프로필 이미지 */
#page-notifications .noti-card .noti-avatar {
    width: 42px;
    height: 42px;
    border-radius: 50%;
    object-fit: cover;
    flex: 0 0 42px;
    display: block;
    max-width: none;
    max-height: none;
    aspect-ratio: 1 / 1;
}

/* 본문 */
.noti-main {
    display: flex;
    flex-direction: column;
    gap: 2px;
    min-width: 0;
    flex: 1 1 auto;
}

.noti-head {
    display: flex;
    align-items: baseline;
    gap: 8px;
    margin-bottom: 1px;
}

.noti-nick {
    font-weight: 700;
    color: #111;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.noti-time {
    flex: none;
    font-size: 12px;
    color: #9ca3af;
}

.noti-text {
    color: #9ca3af;
    line-height: 1.28;
    font-size: 0.95rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.noti-preview {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    word-break: break-word;
    margin-top: 2px;
    font-size: 0.94rem;
    line-height: 1.30;
    opacity: 0.95;
    color: #111;
}
